System.register(["jimu-arcgis","jimu-core","calcite-components"],(function(e,t){var a={},o={},n={};return{setters:[function(e){a.JimuMapViewComponent=e.JimuMapViewComponent},function(e){o.DataSourceManager=e.DataSourceManager,o.React=e.React},function(e){n.CalciteButton=e.CalciteButton,n.CalciteInput=e.CalciteInput,n.CalciteLabel=e.CalciteLabel}],execute:function(){e((()=>{var e={640:(e,t,a)=>{"use strict";var o=a(1742),n={"text/plain":"Text","text/html":"Url",default:"Text"};e.exports=function(e,t){var a,r,i,c,l,s,d=!1;t||(t={}),a=t.debug||!1;try{if(i=o(),c=document.createRange(),l=document.getSelection(),(s=document.createElement("span")).textContent=e,s.ariaHidden="true",s.style.all="unset",s.style.position="fixed",s.style.top=0,s.style.clip="rect(0, 0, 0, 0)",s.style.whiteSpace="pre",s.style.webkitUserSelect="text",s.style.MozUserSelect="text",s.style.msUserSelect="text",s.style.userSelect="text",s.addEventListener("copy",(function(o){if(o.stopPropagation(),t.format)if(o.preventDefault(),void 0===o.clipboardData){a&&console.warn("unable to use e.clipboardData"),a&&console.warn("trying IE specific stuff"),window.clipboardData.clearData();var r=n[t.format]||n.default;window.clipboardData.setData(r,e)}else o.clipboardData.clearData(),o.clipboardData.setData(t.format,e);t.onCopy&&(o.preventDefault(),t.onCopy(o.clipboardData))})),document.body.appendChild(s),c.selectNodeContents(s),l.addRange(c),!document.execCommand("copy"))throw new Error("copy command was unsuccessful");d=!0}catch(o){a&&console.error("unable to copy using execCommand: ",o),a&&console.warn("trying IE specific stuff");try{window.clipboardData.setData(t.format||"text",e),t.onCopy&&t.onCopy(window.clipboardData),d=!0}catch(o){a&&console.error("unable to copy using clipboardData: ",o),a&&console.error("falling back to prompt"),r=function(e){var t=(/mac os x/i.test(navigator.userAgent)?"âŒ˜":"Ctrl")+"+C";return e.replace(/#{\s*key\s*}/g,t)}("message"in t?t.message:"Copy to clipboard: #{key}, Enter"),window.prompt(r,e)}}finally{l&&("function"==typeof l.removeRange?l.removeRange(c):l.removeAllRanges()),s&&document.body.removeChild(s),i()}return d}},1742:e=>{e.exports=function(){var e=document.getSelection();if(!e.rangeCount)return function(){};for(var t=document.activeElement,a=[],o=0;o<e.rangeCount;o++)a.push(e.getRangeAt(o));switch(t.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":t.blur();break;default:t=null}return e.removeAllRanges(),function(){"Caret"===e.type&&e.removeAllRanges(),e.rangeCount||a.forEach((function(t){e.addRange(t)})),t&&t.focus()}}},4145:e=>{"use strict";e.exports=n},6826:e=>{"use strict";e.exports=a},8891:e=>{"use strict";e.exports=o}},t={};function r(a){var o=t[a];if(void 0!==o)return o.exports;var n=t[a]={exports:{}};return e[a](n,n.exports,r),n.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var a in t)r.o(t,a)&&!r.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.p="";var i={};return r.p=window.jimuConfig.baseUrl,(()=>{"use strict";r.r(i),r.d(i,{__set_webpack_public_path__:()=>l,default:()=>c});var e=r(640),t=r.n(e),a=r(6826),o=r(8891),n=r(4145);const c=e=>{var r;const[i,c]=o.React.useState(null),[l,s]=o.React.useState(""),[d,u]=o.React.useState(!1),[p,m]=o.React.useState(!1);return o.React.createElement("div",{className:"widget-demo jimu-widget m-2"},o.React.createElement(n.CalciteLabel,null,"Generate URL to Share this View",o.React.createElement(n.CalciteInput,{value:l,style:{"padding-right":"5%","padding-bottom":"1%"}})),o.React.createElement(n.CalciteButton,{onClick:()=>{let e,t;const a=[],n=o.DataSourceManager.getInstance().getDataSource(i.dataSourceId).dataSourceManager.dataSources;for(const e in n)n[e].dataSourceJson&&"FEATURE_LAYER"===n[e].dataSourceJson.type&&a.push(n[e]);a.forEach((e=>{const a=e.getCurrentQueryParams(),o=e.id;t=void 0===t?o+":"+encodeURIComponent(JSON.stringify(a.where)):t+","+o+":"+encodeURIComponent(JSON.stringify(a.where))})),void 0!==t?(e=window.location.origin+window.location.pathname+"?data_filter="+t,e=e.replace(/[()]/g,"").replace(/%22/g,"")):e=window.location.origin+window.location.pathname,e+="#"+i.mapWidgetId+"=scale:"+i.view.viewpoint.scale+",center:"+encodeURIComponent(JSON.stringify(i.view.center.x+","+i.view.center.y+","+i.view.spatialReference.wkid)),e=e.replace(/[()]/g,"").replace(/%22/g,"");const r={},c=[];for(const e in i.jimuLayerViews)c.push(i.jimuLayerViews[e].id);i.view.map.allLayers.forEach((e=>{if(e.visible){const t=i.id+"-"+e.id;r[t]=!0}else{const t=i.id+"-"+e.id;r[t]=!1}}));const l={[i.id]:r},d=JSON.stringify(l);e+=",layer_visibility:"+encodeURIComponent(d),s(e),u(!1),m(!1)},style:{"padding-right":"1%","padding-bottom":"1%"}},"Generate URL"),o.React.createElement(n.CalciteButton,{onClick:()=>{const e=window.location.href;s(e),m(!0)},style:{"padding-right":"1%","padding-bottom":"1%"}},p?"Filters Cleared!":"Clear URL Filters"),l&&o.React.createElement(n.CalciteButton,{onClick:()=>{t()(l),u(!0)},style:{"padding-bottom":"1%"}},d?"Copied!":"Copy to Clipboard"),o.React.createElement(a.JimuMapViewComponent,{useMapWidgetId:null===(r=e.useMapWidgetIds)||void 0===r?void 0:r[0],onActiveViewChange:c}))};function l(e){r.p=e}})(),i})())}}}));